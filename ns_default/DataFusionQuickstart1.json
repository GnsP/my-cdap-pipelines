{
  "name": "DataFusionQuickstart1",
  "appVersion": "ace0f7be-06a1-11ee-812d-02421395142b",
  "description": "Data Pipeline Application",
  "change": {
    "author": "gnspsd",
    "creationTimeMillis": 1686300195503,
    "latest": true,
    "description": "add an error inducing node"
  },
  "configuration": "{\"resources\":{\"memoryMB\":2048.0,\"virtualCores\":1.0},\"driverResources\":{\"memoryMB\":2048.0,\"virtualCores\":1.0},\"connections\":[{\"from\":\"NYT Best Sellers Raw Data\",\"to\":\"Parsing and Transformations\"},{\"from\":\"Parsing and Transformations\",\"to\":\"JavaScript\"},{\"from\":\"JavaScript\",\"to\":\"File\"}],\"comments\":[],\"postActions\":[],\"properties\":{},\"processTimingEnabled\":true,\"stageLoggingEnabled\":true,\"stages\":[{\"name\":\"NYT Best Sellers Raw Data\",\"plugin\":{\"name\":\"GCSFile\",\"type\":\"batchsource\",\"label\":\"NYT Best Sellers Raw Data\",\"artifact\":{\"name\":\"google-cloud\",\"version\":\"0.22.0-SNAPSHOT\",\"scope\":\"SYSTEM\"},\"properties\":{\"filenameOnly\":\"false\",\"copyHeader\":\"false\",\"schema\":\"{\\\"type\\\":\\\"record\\\",\\\"name\\\":\\\"textfile\\\",\\\"fields\\\":[{\\\"name\\\":\\\"offset\\\",\\\"type\\\":\\\"long\\\"},{\\\"name\\\":\\\"body\\\",\\\"type\\\":\\\"string\\\"}]}\",\"path\":\"gs://nyt-bestsellers/nyt2.json\",\"format\":\"text\",\"recursive\":\"false\",\"referenceName\":\"NYT_BestSellers_Raw\",\"project\":\"gnspsd-dev\",\"useConnection\":\"false\",\"serviceAccountType\":\"JSON\",\"sampleSize\":\"1000\",\"ignoreNonExistingFolders\":\"false\",\"encrypted\":\"false\",\"fileEncoding\":\"UTF-8\",\"serviceAccountJSON\":\"{   \\\"type\\\": \\\"service_account\\\",   \\\"project_id\\\": \\\"gnspsd-dev\\\",   \\\"private_key_id\\\": \\\"1558508c56553f6377224c2a8f684610974dcfb3\\\",   \\\"private_key\\\": \\\"-----BEGIN PRIVATE KEY-----\\\\nMIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQCwQH/Kwf7BxQ0t\\\\nUDSnq31Huba2+X+/pAj91ga19YGh3ypnWu2pr8GH0LasmFSbtyah/GD4/G5jPV9S\\\\nUKkmhYMcEDBVHm7r+kvn+DegvjgVKR/PXkfeIUVRdPEyIKsgE5UB0KzLPcmfYGSj\\\\nnHnC4u8GuVPJgY8JAPwv3SngBGcnOOc9Vrlf7FlK89T4nCGZVPRU4i2MTPrskXc4\\\\n6Ng+gKOlnKEOX+O3JGGVmEeXDT7kxUhTUmi6bjWQ6n0jw2JajQxqZqZ40qWIaKCV\\\\nDIuyVzxBB53pSkkhvV0dqrf2ySJOIc6BA1C0fO8LdeyH+7eUp3ot9m4El1igyQ6B\\\\n3oHqbbyrAgMBAAECggEAFNSSpeJ2mu0QiR31Eynr5Qm4Y/ip1frriyB7645n8zse\\\\nVlfDRe49N7F9nXllan/jY3qh9VtUKotq1B4vV5uo6qypIa42mtIanYBTBr7kfu+8\\\\n0DPK16BkAmQJS4zb3K8jybKhcWXMifcI/eM06skKSeemVObogj5pD7kaRV0P2e0n\\\\no+QSRZpMIeoufXahSUdJTdGI+LnDsjpXMcnPtGu2JxoRWzm++m4Hh1Pim2FDDBq7\\\\nwS7uK6RUEvKCf9mTjwZjuPFet1jbp6J5bNk1z8uBPdqPsSZkrVgyJbYg3nmnU7W5\\\\n+5+DZc8VobXaAvBbIJAWpSWwTt8HAFWjQ7KqPEbOYQKBgQDwQ4vU4ROicDMTuwT9\\\\neQQ9XDCfuqFDcdtWJBlydDTMtnloimqRuj5aRuLsFzLSEsF1Wo9jC1Ida0KC0Rc/\\\\nIlswMTLq/QII6V+LGMDtJogCRPPm0mITn3GPB9IOyD1Qi5G+xZzp/UlGNW/NGk38\\\\nyi+mUCQwejdQROHI30dU4lXPoQKBgQC7y63E05JXCAXm0LcHC0JVqh57Yly58SIx\\\\niWHl/Tb7UDxGb9wP7cK/W/LJI4t77eataVhvpQM3SfoYjZnDlPBYFtvLMUPQBDfd\\\\nxEKscbA5GNJe96M4RwXE7uLWiqBzNE66mLI0PER8ExqCGAv1B70DkYcIhiZlJ89K\\\\nN9pr2QsYywKBgFOFR5CjBW5MTpUnSB7M+LpT19tOx0xowfR57BarasdXD3FV3KH3\\\\n+kDrr2qezd3VA0dGSd4GS29Kn/5VrR0XVle0YpzpgtGSPtJdsoM+B72yNo8gx1NG\\\\n8/TipRTaauYa/nkwvNFiaRxs6waDhGTB7DqGVW48rgnLSCnJ5EQPwgDBAoGAKVN7\\\\nG/NLIufbFJ4diOlLYbqcFp7gtPKBidEnwArnDIrtmLqI/OBfmOjNFsJBsbX6q3Kh\\\\nSYBQotwes0SF7+pYsanmGGLw/1fOS3kjCvvBwe7abJemTX4joODI/llnUbLTGHD9\\\\n1kzk7UDu9m4AQ52+VIiz5IZQ8LXAAh8ka9NJg90CgYBnSgOcf1zact3aSSOkloB+\\\\nFFGnVX49CrELox39YXP+tU5XBX3EwCqM6PYP7XeBLxZu601ZHe6hlQOswOedoipK\\\\n2etgae1DEfnqc+BXxe1UWoR2FFU+ar8m4usHDYh7kRSKpYJyxJxctzYDca4BuNAZ\\\\nHO41dMiEhSItGnSGOZuRdA\\u003d\\u003d\\\\n-----END PRIVATE KEY-----\\\\n\\\",   \\\"client_email\\\": \\\"dev-sa@gnspsd-dev.iam.gserviceaccount.com\\\",   \\\"client_id\\\": \\\"111791290244567313390\\\",   \\\"auth_uri\\\": \\\"https://accounts.google.com/o/oauth2/auth\\\",   \\\"token_uri\\\": \\\"https://oauth2.googleapis.com/token\\\",   \\\"auth_provider_x509_cert_url\\\": \\\"https://www.googleapis.com/oauth2/v1/certs\\\",   \\\"client_x509_cert_url\\\": \\\"https://www.googleapis.com/robot/v1/metadata/x509/dev-sa%40gnspsd-dev.iam.gserviceaccount.com\\\",   \\\"universe_domain\\\": \\\"googleapis.com\\\" }\"}},\"outputSchema\":\"{\\\"type\\\":\\\"record\\\",\\\"name\\\":\\\"textfile\\\",\\\"fields\\\":[{\\\"name\\\":\\\"offset\\\",\\\"type\\\":\\\"long\\\"},{\\\"name\\\":\\\"body\\\",\\\"type\\\":\\\"string\\\"}]}\",\"id\":\"NYT-Best-Sellers-Raw-Data\"},{\"name\":\"Parsing and Transformations\",\"plugin\":{\"name\":\"Wrangler\",\"type\":\"transform\",\"label\":\"Parsing and Transformations\",\"artifact\":{\"name\":\"wrangler-transform\",\"version\":\"4.10.0-SNAPSHOT\",\"scope\":\"SYSTEM\"},\"properties\":{\"workspaceId\":\"b22b1b0c24b12acd45f834ac5e1dfffb\",\"directives\":\"split-to-rows body \\\\n\\nparse-as-json :body 1\\nparse-as-json :body__id 1\\nparse-as-json :body_weeks_on_list 1\\nparse-as-json :body_rank_last_week 1\\nparse-as-json :body_rank 1\\nparse-as-json :body_price 1\\nparse-as-json :body_published_date 2\\nparse-as-json :body_bestsellers_date 2\\ncolumns-replace s/^body_//g\\ncleanse-column-names\\nrename _id__oid id\\nrename weeks_on_list__numberint weeks_on_list\\nrename rank_last_week__numberint rank_last_week\\nrename rank__numberint rank\\nfill-null-or-empty :price__numberint \\u00270\\u0027\\nrename price__numberint price\\nrename published_date__date__numberlong published_date\\nrename bestsellers_date__date__numberlong bestsellers_date\\nfill-null-or-empty :price__numberdouble \\u00270\\u0027\\nrename price__numberdouble price_other\\nfill-null-or-empty :price \\u00270\\u0027\\nfill-null-or-empty :price_other \\u00270\\u0027\\nset-type :price float\\nset-type :price_other float\\nset-column :price_final price+price_other\\ndrop price\\ndrop price_other\\nset-type :published_date long\\nset-type :bestsellers_date long\\nset-type :weeks_on_list integer\\nset-type :rank_last_week integer\\nset-type :rank long\\nfilter-rows-on regex-not-match rank_last_week ^0$\\ndrop rank_last_week\\ndrop weeks_on_list\\ndrop published_date\\ndrop bestsellers_date\\nfilter-rows-on condition-false rank \\u003c\\u003d3\\nfilter-rows-on regex-match price_final ^0.0$\\nfilter-rows-on condition-false price_final \\u003c25.0\",\"schema\":\"{\\\"type\\\":\\\"record\\\",\\\"name\\\":\\\"etlSchemaBody\\\",\\\"fields\\\":[{\\\"name\\\":\\\"amazon_product_url\\\",\\\"type\\\":[\\\"string\\\",\\\"null\\\"]},{\\\"name\\\":\\\"author\\\",\\\"type\\\":[\\\"string\\\",\\\"null\\\"]},{\\\"name\\\":\\\"description\\\",\\\"type\\\":[\\\"string\\\",\\\"null\\\"]},{\\\"name\\\":\\\"publisher\\\",\\\"type\\\":[\\\"string\\\",\\\"null\\\"]},{\\\"name\\\":\\\"title\\\",\\\"type\\\":[\\\"string\\\",\\\"null\\\"]},{\\\"name\\\":\\\"id\\\",\\\"type\\\":[\\\"string\\\",\\\"null\\\"]},{\\\"name\\\":\\\"rank\\\",\\\"type\\\":[\\\"long\\\",\\\"null\\\"]},{\\\"name\\\":\\\"price_final\\\",\\\"type\\\":[\\\"double\\\",\\\"null\\\"]}]}\",\"field\":\"body\",\"precondition\":\"false\",\"on-error\":\"fail-pipeline\"}},\"outputSchema\":\"{\\\"type\\\":\\\"record\\\",\\\"name\\\":\\\"etlSchemaBody\\\",\\\"fields\\\":[{\\\"name\\\":\\\"amazon_product_url\\\",\\\"type\\\":[\\\"string\\\",\\\"null\\\"]},{\\\"name\\\":\\\"author\\\",\\\"type\\\":[\\\"string\\\",\\\"null\\\"]},{\\\"name\\\":\\\"description\\\",\\\"type\\\":[\\\"string\\\",\\\"null\\\"]},{\\\"name\\\":\\\"publisher\\\",\\\"type\\\":[\\\"string\\\",\\\"null\\\"]},{\\\"name\\\":\\\"title\\\",\\\"type\\\":[\\\"string\\\",\\\"null\\\"]},{\\\"name\\\":\\\"id\\\",\\\"type\\\":[\\\"string\\\",\\\"null\\\"]},{\\\"name\\\":\\\"rank\\\",\\\"type\\\":[\\\"long\\\",\\\"null\\\"]},{\\\"name\\\":\\\"price_final\\\",\\\"type\\\":[\\\"double\\\",\\\"null\\\"]}]}\",\"inputSchema\":[{\"name\":\"NYT Best Sellers Raw Data\",\"schema\":\"{\\\"type\\\":\\\"record\\\",\\\"name\\\":\\\"textfile\\\",\\\"fields\\\":[{\\\"name\\\":\\\"offset\\\",\\\"type\\\":\\\"long\\\"},{\\\"name\\\":\\\"body\\\",\\\"type\\\":\\\"string\\\"}]}\"}],\"id\":\"Parsing-and-Transformations\"},{\"name\":\"JavaScript\",\"plugin\":{\"name\":\"JavaScript\",\"type\":\"transform\",\"label\":\"JavaScript\",\"artifact\":{\"name\":\"core-plugins\",\"version\":\"2.12.0-SNAPSHOT\",\"scope\":\"SYSTEM\"},\"properties\":{\"script\":\"/**\\n * @summary Transforms the provided input record into zero or more output records or errors.\\n\\n * Input records are available in JavaScript code as JSON objects. \\n\\n * @param input an object that contains the input record as a JSON.   e.g. to access a field called \\u0027total\\u0027 from the input record, use input.total.\\n * @param emitter an object that can be used to emit zero or more records (using the emitter.emit() method) or errors (using the emitter.emitError() method) \\n * @param context an object that provides access to:\\n *            1. CDAP Metrics - context.getMetrics().count(\\u0027output\\u0027, 1);\\n *            2. CDAP Logs - context.getLogger().debug(\\u0027Received a record\\u0027);\\n *            3. Lookups - context.getLookup(\\u0027blacklist\\u0027).lookup(input.id); or\\n *            4. Runtime Arguments - context.getArguments().get(\\u0027priceThreshold\\u0027) \\n */ \\nfunction transform(input, emitter, context) {\\n  if (Math.random() \\u003e 0.5) throw \\\"it\\u0027s a bird ! it\\u0027s a plane ! it\\u0027s an error XD\\\";\\n  emitter.emit(input);\\n}\",\"schema\":\"{\\\"type\\\":\\\"record\\\",\\\"name\\\":\\\"etlSchemaBody\\\",\\\"fields\\\":[{\\\"name\\\":\\\"amazon_product_url\\\",\\\"type\\\":[\\\"string\\\",\\\"null\\\"]},{\\\"name\\\":\\\"author\\\",\\\"type\\\":[\\\"string\\\",\\\"null\\\"]},{\\\"name\\\":\\\"description\\\",\\\"type\\\":[\\\"string\\\",\\\"null\\\"]},{\\\"name\\\":\\\"publisher\\\",\\\"type\\\":[\\\"string\\\",\\\"null\\\"]},{\\\"name\\\":\\\"title\\\",\\\"type\\\":[\\\"string\\\",\\\"null\\\"]},{\\\"name\\\":\\\"id\\\",\\\"type\\\":[\\\"string\\\",\\\"null\\\"]},{\\\"name\\\":\\\"rank\\\",\\\"type\\\":[\\\"long\\\",\\\"null\\\"]},{\\\"name\\\":\\\"price_final\\\",\\\"type\\\":[\\\"double\\\",\\\"null\\\"]}]}\"}},\"outputSchema\":\"{\\\"type\\\":\\\"record\\\",\\\"name\\\":\\\"etlSchemaBody\\\",\\\"fields\\\":[{\\\"name\\\":\\\"amazon_product_url\\\",\\\"type\\\":[\\\"string\\\",\\\"null\\\"]},{\\\"name\\\":\\\"author\\\",\\\"type\\\":[\\\"string\\\",\\\"null\\\"]},{\\\"name\\\":\\\"description\\\",\\\"type\\\":[\\\"string\\\",\\\"null\\\"]},{\\\"name\\\":\\\"publisher\\\",\\\"type\\\":[\\\"string\\\",\\\"null\\\"]},{\\\"name\\\":\\\"title\\\",\\\"type\\\":[\\\"string\\\",\\\"null\\\"]},{\\\"name\\\":\\\"id\\\",\\\"type\\\":[\\\"string\\\",\\\"null\\\"]},{\\\"name\\\":\\\"rank\\\",\\\"type\\\":[\\\"long\\\",\\\"null\\\"]},{\\\"name\\\":\\\"price_final\\\",\\\"type\\\":[\\\"double\\\",\\\"null\\\"]}]}\",\"inputSchema\":[{\"name\":\"Parsing and Transformations\",\"schema\":\"{\\\"type\\\":\\\"record\\\",\\\"name\\\":\\\"etlSchemaBody\\\",\\\"fields\\\":[{\\\"name\\\":\\\"amazon_product_url\\\",\\\"type\\\":[\\\"string\\\",\\\"null\\\"]},{\\\"name\\\":\\\"author\\\",\\\"type\\\":[\\\"string\\\",\\\"null\\\"]},{\\\"name\\\":\\\"description\\\",\\\"type\\\":[\\\"string\\\",\\\"null\\\"]},{\\\"name\\\":\\\"publisher\\\",\\\"type\\\":[\\\"string\\\",\\\"null\\\"]},{\\\"name\\\":\\\"title\\\",\\\"type\\\":[\\\"string\\\",\\\"null\\\"]},{\\\"name\\\":\\\"id\\\",\\\"type\\\":[\\\"string\\\",\\\"null\\\"]},{\\\"name\\\":\\\"rank\\\",\\\"type\\\":[\\\"long\\\",\\\"null\\\"]},{\\\"name\\\":\\\"price_final\\\",\\\"type\\\":[\\\"double\\\",\\\"null\\\"]}]}\"}],\"id\":\"JavaScript\"},{\"name\":\"File\",\"plugin\":{\"name\":\"File\",\"type\":\"batchsink\",\"label\":\"File\",\"artifact\":{\"name\":\"core-plugins\",\"version\":\"2.12.0-SNAPSHOT\",\"scope\":\"SYSTEM\"},\"properties\":{\"referenceName\":\"DataFusion_Quickstart_sink\",\"path\":\"/usr/local/google/home/gnspsd/opensource/testdata/output\",\"suffix\":\"yyyy-MM-dd-HH-mm\",\"format\":\"csv\",\"schema\":\"{\\\"type\\\":\\\"record\\\",\\\"name\\\":\\\"etlSchemaBody\\\",\\\"fields\\\":[{\\\"name\\\":\\\"amazon_product_url\\\",\\\"type\\\":[\\\"string\\\",\\\"null\\\"]},{\\\"name\\\":\\\"author\\\",\\\"type\\\":[\\\"string\\\",\\\"null\\\"]},{\\\"name\\\":\\\"description\\\",\\\"type\\\":[\\\"string\\\",\\\"null\\\"]},{\\\"name\\\":\\\"publisher\\\",\\\"type\\\":[\\\"string\\\",\\\"null\\\"]},{\\\"name\\\":\\\"title\\\",\\\"type\\\":[\\\"string\\\",\\\"null\\\"]},{\\\"name\\\":\\\"id\\\",\\\"type\\\":[\\\"string\\\",\\\"null\\\"]},{\\\"name\\\":\\\"rank\\\",\\\"type\\\":[\\\"long\\\",\\\"null\\\"]},{\\\"name\\\":\\\"price_final\\\",\\\"type\\\":[\\\"double\\\",\\\"null\\\"]}]}\",\"writeHeader\":\"false\"}},\"outputSchema\":\"{\\\"type\\\":\\\"record\\\",\\\"name\\\":\\\"etlSchemaBody\\\",\\\"fields\\\":[{\\\"name\\\":\\\"amazon_product_url\\\",\\\"type\\\":[\\\"string\\\",\\\"null\\\"]},{\\\"name\\\":\\\"author\\\",\\\"type\\\":[\\\"string\\\",\\\"null\\\"]},{\\\"name\\\":\\\"description\\\",\\\"type\\\":[\\\"string\\\",\\\"null\\\"]},{\\\"name\\\":\\\"publisher\\\",\\\"type\\\":[\\\"string\\\",\\\"null\\\"]},{\\\"name\\\":\\\"title\\\",\\\"type\\\":[\\\"string\\\",\\\"null\\\"]},{\\\"name\\\":\\\"id\\\",\\\"type\\\":[\\\"string\\\",\\\"null\\\"]},{\\\"name\\\":\\\"rank\\\",\\\"type\\\":[\\\"long\\\",\\\"null\\\"]},{\\\"name\\\":\\\"price_final\\\",\\\"type\\\":[\\\"double\\\",\\\"null\\\"]}]}\",\"inputSchema\":[{\"name\":\"Parsing and Transformations\",\"schema\":\"{\\\"type\\\":\\\"record\\\",\\\"name\\\":\\\"etlSchemaBody\\\",\\\"fields\\\":[{\\\"name\\\":\\\"amazon_product_url\\\",\\\"type\\\":[\\\"string\\\",\\\"null\\\"]},{\\\"name\\\":\\\"author\\\",\\\"type\\\":[\\\"string\\\",\\\"null\\\"]},{\\\"name\\\":\\\"description\\\",\\\"type\\\":[\\\"string\\\",\\\"null\\\"]},{\\\"name\\\":\\\"publisher\\\",\\\"type\\\":[\\\"string\\\",\\\"null\\\"]},{\\\"name\\\":\\\"title\\\",\\\"type\\\":[\\\"string\\\",\\\"null\\\"]},{\\\"name\\\":\\\"id\\\",\\\"type\\\":[\\\"string\\\",\\\"null\\\"]},{\\\"name\\\":\\\"rank\\\",\\\"type\\\":[\\\"long\\\",\\\"null\\\"]},{\\\"name\\\":\\\"price_final\\\",\\\"type\\\":[\\\"double\\\",\\\"null\\\"]}]}\"}],\"id\":\"File\"}],\"schedule\":\"0 * * * *\",\"engine\":\"spark\",\"numOfRecordsPreview\":100.0,\"rangeRecordsPreview\":{\"min\":1.0,\"max\":5000.0},\"description\":\"Data Pipeline Application\",\"maxConcurrentRuns\":1.0}",
  "datasets": [],
  "programs": [
    {
      "type": "Spark",
      "app": "DataFusionQuickstart1",
      "name": "phase-1",
      "description": "Sources \u0027NYT Best Sellers Raw Data\u0027 to sinks \u0027File\u0027."
    },
    {
      "type": "Workflow",
      "app": "DataFusionQuickstart1",
      "name": "DataPipelineWorkflow",
      "description": "Data Pipeline Workflow"
    }
  ],
  "plugins": [
    {
      "id": "NYT Best Sellers Raw Data",
      "name": "GCSFile",
      "type": "batchsource"
    },
    {
      "id": "JavaScript",
      "name": "JavaScript",
      "type": "transform"
    },
    {
      "id": "Parsing and Transformations",
      "name": "Wrangler",
      "type": "transform"
    },
    {
      "id": "File",
      "name": "File",
      "type": "batchsink"
    },
    {
      "id": "File:csv",
      "name": "csv",
      "type": "validatingOutputFormat"
    },
    {
      "id": "NYT Best Sellers Raw Data:text",
      "name": "text",
      "type": "validatingInputFormat"
    }
  ],
  "artifact": {
    "name": "cdap-data-pipeline",
    "version": "6.10.0-SNAPSHOT",
    "scope": "SYSTEM"
  }
}